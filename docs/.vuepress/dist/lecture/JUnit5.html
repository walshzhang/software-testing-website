<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.43">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>JUnit5 框架 | 软件测试课程网站</title><meta name="description" content="软件测试课程">
    <link rel="modulepreload" href="/software-testing-website/assets/app.e5452fa6.js"><link rel="modulepreload" href="/software-testing-website/assets/JUnit5.html.e1f4de1a.js"><link rel="modulepreload" href="/software-testing-website/assets/JUnit5.html.5e5180c9.js"><link rel="prefetch" href="/software-testing-website/assets/index.html.b176fa8c.js"><link rel="prefetch" href="/software-testing-website/assets/Mockito.html.5dab55b7.js"><link rel="prefetch" href="/software-testing-website/assets/index.html.ede79a66.js"><link rel="prefetch" href="/software-testing-website/assets/单元测试.html.e5705ea1.js"><link rel="prefetch" href="/software-testing-website/assets/基于属性的测试.html.00947198.js"><link rel="prefetch" href="/software-testing-website/assets/基本概念.html.b964ae24.js"><link rel="prefetch" href="/software-testing-website/assets/性能测试.html.814cd16a.js"><link rel="prefetch" href="/software-testing-website/assets/生命周期中的测试.html.004d9633.js"><link rel="prefetch" href="/software-testing-website/assets/系统测试.html.622bd5c9.js"><link rel="prefetch" href="/software-testing-website/assets/集成测试.html.17a8f955.js"><link rel="prefetch" href="/software-testing-website/assets/404.html.93146c89.js"><link rel="prefetch" href="/software-testing-website/assets/index.html.0e4ab061.js"><link rel="prefetch" href="/software-testing-website/assets/Mockito.html.9df1aa58.js"><link rel="prefetch" href="/software-testing-website/assets/index.html.f67f227d.js"><link rel="prefetch" href="/software-testing-website/assets/单元测试.html.93bb8034.js"><link rel="prefetch" href="/software-testing-website/assets/基于属性的测试.html.f2b1ef40.js"><link rel="prefetch" href="/software-testing-website/assets/基本概念.html.ce873bc2.js"><link rel="prefetch" href="/software-testing-website/assets/性能测试.html.70506c58.js"><link rel="prefetch" href="/software-testing-website/assets/生命周期中的测试.html.6f622386.js"><link rel="prefetch" href="/software-testing-website/assets/系统测试.html.9e12790c.js"><link rel="prefetch" href="/software-testing-website/assets/集成测试.html.66d08901.js"><link rel="prefetch" href="/software-testing-website/assets/404.html.867f8eec.js"><link rel="prefetch" href="/software-testing-website/assets/404.39aeefa7.js"><link rel="prefetch" href="/software-testing-website/assets/Layout.aa5ba379.js">
    <link rel="stylesheet" href="/software-testing-website/assets/style.46f2c737.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/software-testing-website/" class=""><!----><span class="site-name">软件测试课程网站</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/software-testing-website/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/software-testing-website/lecture/" class="router-link-active" aria-label="讲义"><!--[--><!--]--> 讲义 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/tcu-se/software-testing-website" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/software-testing-website/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/software-testing-website/lecture/" class="router-link-active" aria-label="讲义"><!--[--><!--]--> 讲义 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitee.com/tcu-se/software-testing-website" rel="noopener noreferrer" target="_blank" aria-label="Gitee"><!--[--><!--]--> Gitee <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">课程讲义 <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/software-testing-website/lecture/" class="router-link-active sidebar-item" aria-label="0 课程介绍"><!--[--><!--]--> 0 课程介绍 <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" class="sidebar-item" aria-label="1 基本概念"><!--[--><!--]--> 1 基本概念 <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%B8%AD%E7%9A%84%E6%B5%8B%E8%AF%95.html" class="sidebar-item" aria-label="2 软件生命周期中的测试"><!--[--><!--]--> 2 软件生命周期中的测试 <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/基于需求的测试.md" class="sidebar-item" aria-label="/lecture/基于需求的测试.md"><!--[--><!--]--> /lecture/基于需求的测试.md <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/基于代码的测试.md" class="sidebar-item" aria-label="/lecture/基于代码的测试.md"><!--[--><!--]--> /lecture/基于代码的测试.md <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html" class="sidebar-item" aria-label="单元测试"><!--[--><!--]--> 单元测试 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="JUnit5 框架"><!--[--><!--]--> JUnit5 框架 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html#概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="概述"><!--[--><!--]--> 概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html#编写测试" class="router-link-active router-link-exact-active sidebar-item" aria-label="编写测试"><!--[--><!--]--> 编写测试 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html#案例-基本用法" class="router-link-active router-link-exact-active sidebar-item" aria-label="案例：基本用法"><!--[--><!--]--> 案例：基本用法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html#参数测试-parameterized-tests" class="router-link-active router-link-exact-active sidebar-item" aria-label="参数测试（Parameterized Tests）"><!--[--><!--]--> 参数测试（Parameterized Tests） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html#测试模板" class="router-link-active router-link-exact-active sidebar-item" aria-label="测试模板"><!--[--><!--]--> 测试模板 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html#junit最佳实践" class="router-link-active router-link-exact-active sidebar-item" aria-label="JUnit最佳实践"><!--[--><!--]--> JUnit最佳实践 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/software-testing-website/lecture/JUnit5.html#junit思考题" class="router-link-active router-link-exact-active sidebar-item" aria-label="JUnit思考题"><!--[--><!--]--> JUnit思考题 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/software-testing-website/lecture/Mockito.html" class="sidebar-item" aria-label="Mockito 框架"><!--[--><!--]--> Mockito 框架 <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95.html" class="sidebar-item" aria-label="集成测试"><!--[--><!--]--> 集成测试 <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/%E7%B3%BB%E7%BB%9F%E6%B5%8B%E8%AF%95.html" class="sidebar-item" aria-label="系统测试"><!--[--><!--]--> 系统测试 <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95.html" class="sidebar-item" aria-label="性能测试"><!--[--><!--]--> 性能测试 <!--[--><!--]--></a><!----></li><li><a href="/software-testing-website/lecture/%E5%9F%BA%E4%BA%8E%E5%B1%9E%E6%80%A7%E7%9A%84%E6%B5%8B%E8%AF%95.html" class="sidebar-item" aria-label="基于属性的测试"><!--[--><!--]--> 基于属性的测试 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="junit5-框架" tabindex="-1"><a class="header-anchor" href="#junit5-框架" aria-hidden="true">#</a> JUnit5 框架</h1><p>[toc]</p><h3 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h3><ul><li><p>网址：https://www.junit.org</p></li><li><p>Github: https://github.com/junit-team/junit5</p></li><li><p>创始人：Kent Beck + Eric Gemma（VS Code）</p><p><img src="/software-testing-website/images/kent-beck.jpg" style="float:left;"><img src="/software-testing-website/images/eric-gemma.jpg"></p></li><li><p>最新版本：5.6.1/4.13</p></li><li><p>IDE支持：Eclipse，IDEA，VS Code</p></li><li><p>构建工具支持：Gradle，Maven，Ant</p></li><li><p>XUnit:</p><ul><li>C/C++：googletest</li><li>数据库集成测试：dbUnit</li></ul></li><li><p>JUnit 5：<strong>需要 JDK 8+</strong></p><ul><li>JUnit Platform <ul><li>启动测试框架</li><li>定义 <code>TestEngine</code> 接口</li><li>提供控制台启动器（<code>Console Launcher</code>）</li></ul></li><li>JUnit Jupiter：编写基于 JUnit 5 的测试和扩展</li><li>JUnit Vintage：为 JUnit 4 和 JUnit 3 提供 TestEngine，使老的测试程序能够运行在 JUnit Platform 上</li></ul></li><li><p>使用 JUnit 5</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- Maven --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.jupiter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-jupiter-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.6.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- Spring Boot --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.vintage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-vintage-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ul><h3 id="编写测试" tabindex="-1"><a class="header-anchor" href="#编写测试" aria-hidden="true">#</a> 编写测试</h3><ul><li><code>AAA</code> 模式 <ul><li>Arrange：准备测试环境。根据测试用例的描述进行准备</li><li>Act：调用被测对象。把测试用例中的测试数据作为参数传递到被测试对象的方法，Act结束后返回实际结果</li><li>Assert：断言。把实际结果与测试用例当中的预期结果进行对比</li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token static">assertEquals</span></span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">example<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Calculator</span></span><span class="token punctuation">;</span> 
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyFirstJUnitJupiterTests</span> <span class="token punctuation">{</span> <span class="token comment">// 测试类</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Calculator</span> calculator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Calculator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Test</span> 
  <span class="token keyword">void</span> <span class="token function">addition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 测试方法</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> calculator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 断言</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>测试类 <ul><li>顶级类，静态成员类</li><li><strong>必须包含至少一个测试方法</strong></li><li><strong>必须不能是抽象类</strong></li><li><strong>只能有一个构造函数</strong></li><li>单元测试类一般命名为 <code>*Test[s]</code></li><li>集成测试类一般命名为<code>*IntegrationTest[s]</code></li></ul></li><li>测试方法 <ul><li>被<code>@Test</code>，<code>@RepeatedTest</code>，<code>@ParameterizedTest</code>，<code>@TestFactory</code>，<code>@TestTemplate</code>等注解直接修饰的的<strong>实例</strong>（不能是静态）方法</li></ul></li><li>生命周期方法：被<code>@BeforeAll</code>，<code>@AfterAll</code>，<code>@BeforeEach</code>，<code>@AfterEach</code>等注解直接修饰的任意方法</li><li><strong>测试方法和生命周期方法可以包含在测试类中，也可以从父类或接口中继承</strong></li><li><strong>测试方法和生命周期方法必须不能是抽象的，也必须不能返回任何值</strong></li><li><strong>测试类，测试方法，生命周期方法不要求是<code>public</code>，但不能是<code>private</code></strong></li></ul><h3 id="案例-基本用法" tabindex="-1"><a class="header-anchor" href="#案例-基本用法" aria-hidden="true">#</a> 案例：基本用法</h3><ul><li><p>编写被测组件</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Money</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> currency<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">double</span> amount<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span><span class="token punctuation">(</span><span class="token class-name">String</span> currency<span class="token punctuation">,</span> <span class="token keyword">double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>amount <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NegativeMoneyAmountException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>amount <span class="token operator">=</span> amount<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currency <span class="token operator">=</span> currency<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Money</span> <span class="token function">dollar</span><span class="token punctuation">(</span><span class="token keyword">double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Money</span><span class="token punctuation">(</span><span class="token string">&quot;USD&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Money</span> <span class="token function">renminbi</span><span class="token punctuation">(</span><span class="token keyword">double</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Money</span><span class="token punctuation">(</span><span class="token string">&quot;RMB&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Money</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Money</span> money<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>money<span class="token punctuation">.</span>currency<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currency<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Money</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currency<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BadCurrencyException</span><span class="token punctuation">(</span>money<span class="token punctuation">.</span>currency<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> o<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> o<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> money <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">Double</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>money<span class="token punctuation">.</span>amount<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
                <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>currency<span class="token punctuation">,</span> money<span class="token punctuation">.</span>currency<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">hash</span><span class="token punctuation">(</span>currency<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></li><li><p>编写测试</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;Test My Money Class&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// @Disabled(&quot;先不运行本次测试&quot;)</span>
<span class="token keyword">class</span> <span class="token class-name">MoneyTest</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token comment">// @Tag(&quot;fast&quot;)</span>
    <span class="token comment">// @Order(1)</span>
    <span class="token comment">// @EnabledOnOs(WINDOWS) // 只在 Windows 上运行</span>
    <span class="token comment">// @EnabledOnJre(JAVA_8) // 至少需要 JRE 8 版本</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;test equality with different currency and same amount&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">test_equality_with_different_currency</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Money</span> dollar5 <span class="token operator">=</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> renminbi5 <span class="token operator">=</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">renminbi</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotEquals</span><span class="token punctuation">(</span>dollar5<span class="token punctuation">,</span> renminbi5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token comment">// @Order(2)</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;test equality with same currency and amount&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">test_equality_with_same_currency_and_amount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Money</span> dollar5 <span class="token operator">=</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> anotherDollar5 <span class="token operator">=</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>dollar5<span class="token punctuation">,</span> anotherDollar5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token comment">// @Disabled(&quot;先不测试不同货币造成的异常&quot;)</span>
    <span class="token keyword">void</span> <span class="token function">test_bad_currency_exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Money</span> dollar5 <span class="token operator">=</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Money</span> renminbi5 <span class="token operator">=</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">renminbi</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertThrows</span><span class="token punctuation">(</span><span class="token class-name">BadCurrencyException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> dollar5<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>renminbi5<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertDoesNotThrow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> dollar5<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dollar5<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
  <span class="token annotation punctuation">@ParameterizedTest</span> 
	<span class="token annotation punctuation">@MethodSource</span><span class="token punctuation">(</span><span class="token string">&quot;moneyProvider&quot;</span><span class="token punctuation">)</span> 
	<span class="token keyword">void</span> <span class="token function">palindromes</span><span class="token punctuation">(</span><span class="token class-name">Money</span> m1<span class="token punctuation">,</span> <span class="token class-name">Money</span> m2<span class="token punctuation">,</span> <span class="token keyword">boolean</span> equality<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token function">assertEquals</span><span class="token punctuation">(</span>equality<span class="token punctuation">,</span> m1<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Arguments</span><span class="token punctuation">&gt;</span></span> <span class="token function">moneyProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		 <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>
				    <span class="token class-name">Arguments</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
				    <span class="token class-name">Arguments</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				    <span class="token class-name">Arguments</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">renminbi</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				    <span class="token class-name">Arguments</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">renminbi</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Money</span><span class="token punctuation">.</span><span class="token function">dollar</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div></li><li><p>生命周期方法</p><ul><li><code>@BeforeEach</code>：每个测试之前执行的操作。一般为重置被测试对象的状态</li><li><code>@BeforeAll</code>：第一个测试之前执行的操作。静态方法。一般为准备测试环境，如数据库连接等</li><li><code>@AfterEach</code>：每个测试之后执行的操作。如，删除测试过程中生成的临时文件等</li><li><code>@AfterAll</code>：最后一个测试之后执行的操作。静态方法。一般为销毁测试环境，如释放数据库连接</li></ul></li></ul><h3 id="参数测试-parameterized-tests" tabindex="-1"><a class="header-anchor" href="#参数测试-parameterized-tests" aria-hidden="true">#</a> 参数测试（Parameterized Tests）</h3><ul><li><p>使用多份不同的测试数据执行同一个测试</p></li><li><p><code>@ParameterizedTest</code>：声明参数测试</p></li><li><p><code>@ValueSource</code>：测试数据的来源</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ParameterizedTest</span> 
<span class="token annotation punctuation">@ValueSource</span><span class="token punctuation">(</span>strings <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;racecar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;radar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;able was I ere I saw elba&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">void</span> <span class="token function">palindromes</span><span class="token punctuation">(</span><span class="token class-name">String</span> candidate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isPalindrome</span><span class="token punctuation">(</span>candidate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>参数测试依赖：<code>org.junit.jupiter:junit-jupiter-params:5.6.1</code></p></li><li><p>参数化测试方法的参数必须满足：</p><ul><li>[可选] 第一个参数为参数索引。索引源由 <code>ArgumentsProvider</code> 提供</li><li>[可选] 第二个参数为聚合器（aggregator）。聚合器从数据源将数据聚合为对象</li><li>[可选] 第三个参数为 <code>ParameterResolver</code> 接口的实现</li></ul></li></ul><h4 id="参数源-sources-of-arguments" tabindex="-1"><a class="header-anchor" href="#参数源-sources-of-arguments" aria-hidden="true">#</a> 参数源（Sources of Arguments）</h4><ul><li><p><code>@ValueSource</code>：指定值数组。数组的类型可以为基本类型和 <code>String</code>，<code>Class</code> 类型</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ParameterizedTest</span> 
<span class="token annotation punctuation">@ValueSource</span><span class="token punctuation">(</span>ints <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">void</span> <span class="token function">testWithValueSource</span><span class="token punctuation">(</span><span class="token keyword">int</span> argument<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token function">assertTrue</span><span class="token punctuation">(</span>argument <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> argument <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><code>@EnumSource</code>：使用枚举指定参数源</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ParameterizedTest</span> 
<span class="token annotation punctuation">@EnumSource</span><span class="token punctuation">(</span>mode <span class="token operator">=</span> EXCLUDE<span class="token punctuation">,</span> names <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;ERAS&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FOREVER&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">void</span> <span class="token function">testWithEnumSourceExclude</span><span class="token punctuation">(</span><span class="token class-name">ChronoUnit</span> unit<span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token function">assertFalse</span><span class="token punctuation">(</span><span class="token class-name">EnumSet</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span>ERAS<span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span>FOREVER<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>unit<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p><code>@MethodSource</code>：指定测试类或外部类的工厂方法来生成参数</p><ul><li>测试类中的工厂方法必须是 <code>static</code>，除非被 <code>@TestInstance(Lifecycle.PER_CLASS)</code> 所注解</li><li>外部类中的工厂方法必须是<code>static</code> 的</li><li>每个工厂方法必须生成一个参数的流（stream of arguments）。流中的每个参数将被作为<code>参数测试方法</code>的参数进行使用</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ParameterizedTest</span> 
<span class="token annotation punctuation">@MethodSource</span><span class="token punctuation">(</span><span class="token string">&quot;stringProvider&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">testWithExplicitLocalMethodSource</span><span class="token punctuation">(</span><span class="token class-name">String</span> argument<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token function">assertNotNull</span><span class="token punctuation">(</span>argument<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">stringProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>  
* 如果 `参数测试方法` 声明了多个参数，则 `工厂方法` 需要返回 `Stream&lt;Arguments&gt;`
  
  ```java
  @ParameterizedTest 
  @MethodSource(&quot;stringIntAndListProvider&quot;) 
  void testWithMultiArgMethodSource(String str, int num, List&lt;String&gt; list) {
    assertEquals(5, str.length());
    assertTrue(num &gt;=1 &amp;&amp; num &lt;=2); 
    assertEquals(2, list.size());
  }
  static Stream&lt;Arguments&gt; stringIntAndListProvider() { 
    return Stream.of( 
      arguments(&quot;apple&quot;, 1, Arrays.asList(&quot;a&quot;, &quot;b&quot;)), 
      arguments(&quot;lemon&quot;, 2, Arrays.asList(&quot;x&quot;, &quot;y&quot;))); 
  }
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><p><code>@CsvSource</code>：从 <code>CSV</code> 文件中获取参数</p></li><li><p><code>@ArgumentsSource</code>： 通过实现<code>ArgumentsProvider</code> 提供自定义，可重用的工厂方法</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ParameterizedTest</span> 
<span class="token annotation punctuation">@ArgumentsSource</span><span class="token punctuation">(</span><span class="token class-name">MyArgumentsProvider</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> 
<span class="token keyword">void</span> <span class="token function">testWithArgumentsSource</span><span class="token punctuation">(</span><span class="token class-name">String</span> argument<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token function">assertNotNull</span><span class="token punctuation">(</span>argument<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyArgumentsProvider</span> <span class="token keyword">implements</span> <span class="token class-name">ArgumentsProvider</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span> 
  <span class="token keyword">public</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Arguments</span><span class="token punctuation">&gt;</span></span> <span class="token function">provideArguments</span><span class="token punctuation">(</span><span class="token class-name">ExtensionContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Arguments</span><span class="token operator">::</span><span class="token function">of</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul><h4 id="参数转换" tabindex="-1"><a class="header-anchor" href="#参数转换" aria-hidden="true">#</a> 参数转换</h4><ul><li><p>如果参数源提供的数据类型与 <code>参数化测试方法</code> 的参数类型不一致时，需要转换</p><h4 id="参数聚合" tabindex="-1"><a class="header-anchor" href="#参数聚合" aria-hidden="true">#</a> 参数聚合</h4></li></ul><h3 id="测试模板" tabindex="-1"><a class="header-anchor" href="#测试模板" aria-hidden="true">#</a> 测试模板</h3><ul><li><code>@TestTemplate</code>：提供了测试用例的模板</li></ul><h2 id="junit最佳实践" tabindex="-1"><a class="header-anchor" href="#junit最佳实践" aria-hidden="true">#</a> JUnit最佳实践</h2><ul><li>使用测试，不要使用System.out或调试</li><li>主代码与测试代码交替编写 <ul><li>小步推进，编织安全网</li><li>增强开发人员的信心</li></ul></li><li>尽可能覆盖所有功能</li><li>每个公开方法都要被测到（Setter/Getter?）</li><li>经常性重构</li><li>为缺陷添加测试</li><li>测试类名为XxxTest，其中Xxx为被测的类名</li><li>测试方法名字要准确，要能够描述用例</li></ul><h2 id="junit思考题" tabindex="-1"><a class="header-anchor" href="#junit思考题" aria-hidden="true">#</a> JUnit思考题</h2><ul><li>如何测试返回类型为void的函数？ //Mockito</li><li>如何测试私有方法？或需要测试私有方法吗？</li><li>如何测试线程？</li><li>如何测试图形界面？</li><li>测试代码需要维护吗？</li><li>JUnit框架可以用来做集成测试吗？</li><li>需要几个测试方法？</li><li>写这么多测试代码值得吗？</li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://gitee.com/tcu-se/software-testing-website/edit/main/lecture/JUnit5.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: xiufeng.zhang@test.com">xiufeng.zhang</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/software-testing-website/lecture/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95.html" class="" aria-label="单元测试"><!--[--><!--]--> 单元测试 <!--[--><!--]--></a></span><span class="next"><a href="/software-testing-website/lecture/Mockito.html" class="" aria-label="Mockito 框架"><!--[--><!--]--> Mockito 框架 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/software-testing-website/assets/app.e5452fa6.js" defer></script>
  </body>
</html>
